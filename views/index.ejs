<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Raleway:200,100,400" rel="stylesheet" type="text/css" />
    <title>AIonos</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
      <link rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Righteous">
  </head>
  <body>
      <h1 style="font-family: Righteous;"><div style="color:deepskyblue;display:inline-block;">AI</div>onos  </h1>
            <h2 style="font-family: Righteous;">Unleash the
          <span
                  class="txt-rotate"
                  data-period="2000"
                  data-rotate='[ "speed", "precision", "prediction", "innovation" ]'>
        </span> of AI
            </h2>
      <br>
      <br>
      <div class="row">
          <div class="column" style="height: 100%;">
              <script>
                  var loadData = new Promise(function(resolve, reject) {
                      var xhr = new XMLHttpRequest();
                      xhr.open('GET', 'https://services.swpc.noaa.gov/json/f107_cm_flux.json', true);
                      xhr.responseType = 'json';
                      xhr.onload = function () {
                          var status = xhr.status;
                          if (status === 200) {
                              resolve(xhr.response);
                          } else {
                              resolve([]);
                          }
                      };
                      xhr.send();
                  });
                  loadData.then(function(res) {
                      dataPoints = [];
                      res.forEach(function (value, index) {
                          dataPoints.push({x: new Date(value["time_tag"]), y: value["flux"]});
                      });

                      var chart = new CanvasJS.Chart("chartContainer", {
                          animationEnabled: true,
                          theme: "dark2",
                          title:{
                              text: "Intensity of solar flux"
                          },
                          axisY:{
                              includeZero:false,
                          },
                          axisX: {
                              xValueType: "dateTime",
                              valueFormatString: "D MMM" ,
                          },
                          data: [{
                              type: "line",
                              dataPoints: dataPoints,

                          }]
                      });
                      chart.render();
                  });
              </script>
              <div id="chartContainer" style="height: 370px; width: 100%;"></div>
              <script src="https://canvasjs.com/assets/script/canvasjs.min.js">;
              </script>
              </div>
          <div class="column" style="height: 100%;">
              <div class="Wrapper">
                  <div class="Input">
                      <form id="mainForm" action="/model" method="get" onkeypress="pressEnter(event);">
                          <input type="text" id="input" class="Input-text" placeholder="Search a frequency" name="data">
                          <label for="input" class="Input-label">your frequency in Mhz</label>
                      </form>
                  </div>
                  <br>

                  <!-- cp ici -->

                  <script>

                      window.onload = function () {

                          var chart = new CanvasJS.Chart("chartContainer2", {
                              animationEnabled: true,
                              zoomEnabled: true,
                              title:{
                                  text: "Prediction"
                              },
                              axisY :{
                                  includeZero:false
                              },
                              theme: "dark2",
                              data: data  // random generator below
                          });
                          chart.render();

                      }

                      var limit = 35+40+10;

                      var y = 0;
                      var data = [];
                      var dataSeries = { type: "line" };
                      var dataPoints = [];
                      // varier entre 0 et 0.00003
                      let i = 0;
                      while(i<35){
                          dataPoints.push({
                              x: i - limit / 2,
                              y: y
                          });
                          i++;
                      }
                      y = 0.000025;
                      while(i<35+40){
                          y += ((Math.random()-0.5) * 0.000005);
                          dataPoints.push({
                              x: i - limit / 2,
                              y: y
                          });
                          i++;
                      }
                      dataSeries.dataPoints = dataPoints;
                      data.push(dataSeries);

                  </script>
                  <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script></head>
                  <body>
                  <div id="chartContainer2" style="height: 170px; width: 100%;">
                  </div>

                  <!-- fin cp -->

              </div>
          </div>
      </div>
      <br>
      <br>
      <h2>With <a href="https://github.com/gabrielmougard/HackathonIA"><font color="#00B7FF">AIonos</font></a> never be cut off from the radio !</h2>
    <script>
        function solarData() {
            var getJSON = function(url, callback) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', url, true);
                xhr.responseType = 'json';
                xhr.onload = function() {
                    var status = xhr.status;
                    if (status === 200) {
                        callback(null, xhr.response);
                    } else {
                        callback(status, xhr.response);
                    }
                };
                xhr.send();
            };
            getJSON('https://services.swpc.noaa.gov/json/f107_cm_flux.json',
                function(err, data) {
                    if (err !== null) {
                        alert('Something went wrong: ' + err);
                    } else {
                        data1=data;
                        dataPoints=[];
                        data1.forEach(function(value,index){
                            dataPoints.push({x:new Date(value["time_tag"]), y:value["flux"]});

                        });
                        alert(dataPoints[0]["x"]);
                        alert(dataPoints[0]["y"]);
                        return dataPoints;
                    }
                });

        }
            window.onload = function () {
                var chart = new CanvasJS.Chart("chartContainer", {
                    animationEnabled: true,
                    theme: "dark2",
                    title:{
                        text: "Intensite du flux solaire"
                    },
                    axisY:{

                    },
                    axisX: {

                        valueFormatString: "D MMM H:m:s" ,
                    },
                    data: [{
                        xValueType: "dateTime",
                        type: "line",
                        dataPoints: solarData(),
                    }]
                });
                chart.render();

            }
        </script>
    <script src="/javascripts/main.js"></script>
    <!--blinking alert-->
  <!--<script>-->
      <!--let state = false;-->
      <!--let counter = 0;-->
      <!--function blink() {-->
          <!--counter++;-->
          <!--if (state){-->
              <!--document.body.style.background = "#222";-->
              <!--state = !state;-->
          <!--}-->
          <!--else if (counter<20){-->
              <!--document.body.style.background = "red";-->
              <!--state = !state;-->
          <!--}-->
      <!--}-->
      <!--setTimeout(function() {-->
          <!--setInterval(() => blink(), 500);-->
      <!--}, 5000);-->
  <!--</script>-->

  </body>
</html>






